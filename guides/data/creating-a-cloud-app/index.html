



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <script src="//assets.adobedtm.com/launch-EN942f79c83ff84c10a45b4856a85eaccb.min.js" async></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107924368-1"></script>
    <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-107924368-1")</script>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://www.stjude.cloud/docs/guides/data/creating-a-cloud-app/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>Creating a Cloud App - St. Jude Cloud Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.4eccddb4.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.20ef595d.js"></script>

      <!-- Adobe Analytics -->
      <script src="//assets.adobedtm.com/launch-EN942f79c83ff84c10a45b4856a85eaccb.min.js" async></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#creating-a-cloud-application" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.stjude.cloud/docs/" title="St. Jude Cloud Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../../images/stjude-logo-child-white.png" width="40" height="28">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                St. Jude Cloud Documentation
              </span>
              <span class="md-header-nav__topic">
                Creating a Cloud App
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/stjude/sjcloud-docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      stjude/sjcloud-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../images/stjude-logo-child-white.png" width="48" height="48">
      
    </span>
    St. Jude Cloud Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/stjude/sjcloud-docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      stjude/sjcloud-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Welcome to St. Jude Cloud" class="md-nav__link">
      Welcome to St. Jude Cloud
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../create-an-account/" title="Create An Account" class="md-nav__link">
      Create An Account
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Data Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Data Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../types-of-data/" title="Types of Data" class="md-nav__link">
      Types of Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/" title="Metadata Provided" class="md-nav__link">
      Metadata Provided
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-request/" title="Making a Data Request" class="md-nav__link">
      Making a Data Request
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../working-with-our-data/" title="Working with Our Data" class="md-nav__link">
      Working with Our Data
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Creating a Cloud App
      </label>
    
    <a href="./" title="Creating a Cloud App" class="md-nav__link md-nav__link--active">
      Creating a Cloud App
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" title="Data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-application" title="Writing the Application" class="md-nav__link">
    Writing the Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-project" title="Creating the Project" class="md-nav__link">
    Creating the Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-and-packages" title="Integrating Tools and Packages" class="md-nav__link">
    Integrating Tools and Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-fastqc" title="Packaging FastQC" class="md-nav__link">
    Packaging FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" title="Installing Dependencies" class="md-nav__link">
    Installing Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-fastqc" title="Calling FastQC" class="md-nav__link">
    Calling FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-files" title="Uploading Files" class="md-nav__link">
    Uploading Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-your-app" title="Building Your App" class="md-nav__link">
    Building Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-your-app" title="Running Your App" class="md-nav__link">
    Running Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-completion" title="Job Completion" class="md-nav__link">
    Job Completion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" title="Conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-transfer-app/" title="Data Transfer Application" class="md-nav__link">
      Data Transfer Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-line/" title="Command Line Interaction" class="md-nav__link">
      Command Line Interaction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Tool Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tool Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/pecan-pie/" title="Pecan PIE" class="md-nav__link">
      Pecan PIE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/neoepitope/" title="NeoepitopePred" class="md-nav__link">
      NeoepitopePred
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/chipseq/" title="ChIP-Seq Peak Calling" class="md-nav__link">
      ChIP-Seq Peak Calling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/rapid-rnaseq/" title="Rapid RNA-Seq Fusion Detection" class="md-nav__link">
      Rapid RNA-Seq Fusion Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/warden/" title="WARDEN Differential Expression Analysis" class="md-nav__link">
      WARDEN Differential Expression Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/mutational-signatures/" title="Mutational Signatures" class="md-nav__link">
      Mutational Signatures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tools/cis-x/" title="" class="md-nav__link">
      
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Visualization Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Visualization Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../portals/pecan/" title="PeCan Data Portal" class="md-nav__link">
      PeCan Data Portal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../portals/genome-paint/" title="Genome Paint" class="md-nav__link">
      Genome Paint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../portals/sickle-cell/" title="Sickle Cell Genomics Portal" class="md-nav__link">
      Sickle Cell Genomics Portal
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Forms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Forms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../forms/how-to-fill-out-DAA/" title="Filling out a Data Access Agreement" class="md-nav__link">
      Filling out a Data Access Agreement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../forms/how-to-fill-out-Extension/" title="Filling out an Extension Addendum" class="md-nav__link">
      Filling out an Extension Addendum
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../citation-reference/" title="Citing St. Jude Cloud" class="md-nav__link">
      Citing St. Jude Cloud
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" title="Data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-application" title="Writing the Application" class="md-nav__link">
    Writing the Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-project" title="Creating the Project" class="md-nav__link">
    Creating the Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-and-packages" title="Integrating Tools and Packages" class="md-nav__link">
    Integrating Tools and Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-fastqc" title="Packaging FastQC" class="md-nav__link">
    Packaging FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" title="Installing Dependencies" class="md-nav__link">
    Installing Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-fastqc" title="Calling FastQC" class="md-nav__link">
    Calling FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-files" title="Uploading Files" class="md-nav__link">
    Uploading Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-your-app" title="Building Your App" class="md-nav__link">
    Building Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-your-app" title="Running Your App" class="md-nav__link">
    Running Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-completion" title="Job Completion" class="md-nav__link">
    Job Completion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" title="Conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/stjude/sjcloud-docs/edit/master/docs/guides/data/creating-a-cloud-app.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="creating-a-cloud-application">Creating a Cloud Application</h1>
<p>This guide will take you through the process of writing an application for working with and manipulating the St. Jude data you've requested. By creating your own application, you will be able to wrap genomic tools and packages from external sources, as well as any tool or application you might have written yourself.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The complete contents of this guide is hosted on the <a href="https://github.com/stjude/sjcloud-app-tutorial">St. Jude App Tutorial</a> repository on GitHub. Feel free to clone the repository and use it as a reference while following this tutorial or try building the application and running it on your own project.</p>
</div>
<h2 id="overview">Overview</h2>
<p>The biggest difference between running an application in the cloud (as opposed to running it in a local environment) is the way we access that data and manipulate it. Writing and running your own cloud application grants numerous benefits. It allows you to submit numerous jobs in parallel, access your data from anywhere with an Internet connection, and utilize resources and compute power at a fraction of the cost (when compared to building your own infrastructure).</p>
<p>Writing your own application will allow you to wrap custom tools to manipulate any data that you have previously requested. When you run your application, the request gets sent to a virtualized Linux container (Ubuntu 14.04 or 16.04) where any dependencies are installed and where your script will be run. Any tools or packages that you include (either through the included package managers, or bundled together in your project) will be available locally on the virtual Linux machine.</p>
<p>However, there are differences in how we manage our data. When a job is submitted, a virtual machine is provisioned specifically for that job request, meaning that it is spun up at-will or when needed. It also implies that once the job has completed, the virtual machine will be reprovisioned or deleted. Any job output or data must be uploaded back to the project space.</p>
<p>In this tutorial, we will be wrapping the <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/">FastQC</a>, a quality control tool for raw sequence data, into our application. This will allow us to run FastQC on any of the St. Jude next generation sequencing data in the cloud. For specific information about how FastQC works, please refer to the <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/Help/">FastQC documentation</a>.</p>
<h2 id="data">Data</h2>
<p>For this tutorial I have requested the PCGP dataset, and once my access request has been approved, my project directory space will look like the following.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-0.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not yet have data in a DNAnexus project, you may request data from St. Jude Cloud by following the directions <a href="../data-request/">here</a> or you may upload your own data using the <a href="../data-transfer-app/">data transfer app</a>. In order to make a data request or upload your own data using the data transfer app, you must first <a href="../../../create-an-account/">create a St. Jude Cloud account</a>.</p>
</div>
<h2 id="writing-the-application">Writing the Application</h2>
<h3 id="requirements">Requirements</h3>
<p><center></p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Download</th>
<th>Website</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>dx-toolkit</td>
<td><a href="https://wiki.dnanexus.com/downloads">Source</a></td>
<td><a href="https://www.dnanexus.com/">DNAnexus</a></td>
<td>v0.276.0</td>
</tr>
<tr>
<td>FastQC</td>
<td><a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/">Source</a></td>
<td><a href="https://www.bioinformatics.babraham.ac.uk/">Babraham Bioinformatics</a></td>
<td>v0.11.8</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>For this application, we will be using the <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> command that is included in the <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">toolkit</span></code>. <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> is an interactive prompt that creates a boilerplate project that will allow you to quickly create an application. For more on <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code>, refer to the DNAnexus wiki article on <a href="https://documentation.dnanexus.com/developer/apps/intro-to-building-apps">Intro to Building Apps</a>. Before continuing, be sure to refer to the <a href="../command-line/">command line interaction page</a> for a walkthrough on how to install <a href="https://documentation.dnanexus.com/downloads#DNAnexus-Platform-SDK">dx-toolkit</a> and how to select your project workspace.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is not necessary to use <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code>. All the necessary files and project directory structure can be created manually. However, <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> provides a quick and easy way to get started. For more information, refer to the <a href="https://documentation.dnanexus.com/developer/apps/advanced-app-tutorial">Advanced App Tutorial</a>.</p>
</div>
<p>All DNAnexus project applications will have the following structure:</p>
<div class="codehilite"><pre><span></span><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="o">/</span>
<span class="err">├──</span> <span class="n">dxapp</span><span class="p">.</span><span class="n">json</span>
<span class="err">├──</span> <span class="n">resources</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">usr</span><span class="o">/</span>
<span class="err">│</span>       <span class="err">└──</span> <span class="n">bin</span><span class="o">/</span>
<span class="err">└──</span> <span class="n">src</span><span class="o">/</span>
    <span class="err">└──</span> <span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>The <code class="codehilite"><span class="n">dxapp</span><span class="p">.</span><span class="n">json</span></code> file is a JSON file that contains metadata about the application we are writing that are needed to build and run the app on the DNAnexus Platform. Most notably, you will need to specify all of the inputs your app requires (both input files or any settings you can tune), output files, and other options such as the number of cores and memory required to run the tool. To see the full list of fields, refer to the <a href="https://documentation.dnanexus.com/developer/apps/app-metadata">DNAnexus wiki</a> guide on the application metadata.</p>
<p>The <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span></code> file is a bash script is what will be executed when the application is run. Any executable binaries that accompany the application, such as other tools or scripts, are placed in the <code class="codehilite"><span class="n">resources</span></code> folder. From there, we can call the executable from within the app when it is run.</p>
<h2 id="creating-the-project">Creating the Project</h2>
<p>Start by running the <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> command from your terminal.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This helper tool will create a <strong>local</strong> directory on your machine. Any code changes we make will be done <em>inside</em> this local project directory created by <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code>. This is because we can write our application locally, <a href="../../../guides/data/creating-a-cloud-app/#building-your-app">build the application</a>, and then <a href="../../../guides/data/creating-a-cloud-app/#running-your-app">run the application</a> in the cloud.</p>
<p>Building the application will compile <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span></code> and then upload it into the project space on the cloud. When we run an application, it will be submitted as a job to be run in the cloud. With this process, we can write the application locally and run it on our data in the cloud, without ever having to utilize personal bandwidth and compute time.</p>
</div>
<div class="codehilite"><pre><span></span>$ dx-app-wizard
</pre></div>


<p>For our inputs, we will enter the following:</p>
<div class="codehilite"><pre><span></span>$ App Name: dx-fastqc-example-app
...
$ Title <span class="o">[]</span>: FastQC Example Application
...
$ Summary <span class="o">[]</span>: Uses FastQC to generate quality control reports on raw sequence data.
...
$ Version <span class="o">[</span><span class="m">0</span>.0.1<span class="o">]</span>: <span class="m">0</span>.0.1
...
$ 1st input name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: bam_file
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: BAM File
...
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file
$ This is an optional parameter <span class="o">[</span>y/n<span class="o">]</span>: n
...
$ 1st output name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: fastqc_html
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: FastQC HTML Report
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file

$ 2nd output name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: fastqc_zip
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: FastQC Zip File
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file
...
$ Timeout policy <span class="o">[</span>48h<span class="o">]</span>: 48h
...
$ Programming language: bash
...
$ Will this app need access to the Internet? <span class="o">[</span>y/N<span class="o">]</span>: N
...
$ Will this app need access to the parent project? <span class="o">[</span>y/N<span class="o">]</span>: y
...
$ Choose an instance <span class="nb">type</span> <span class="k">for</span> your app <span class="o">[</span>mem1_ssd1_x4<span class="o">]</span>: azure:mem1_ssd1_x4
</pre></div>


<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Although our app doesn't need any Internet access in this example, it may be required for your project. Also be sure to check what instance type you will need in the <a href="https://wiki.dnanexus.com/api-specification-v1.0.0/instance-types">API Specifications</a>.</p>
</div>
<p>The FastQC executable supports a variety of file formats (BAM, SAM, FastQ, etc.), and outputs a HTML report and a zip file that contains all the graphs and data. We will use that knowledge to write the input and output parameters for our application. We can also specify other parameters such as the timeout policy, programming language, and instance type. For more information, refer to the <a href="https://documentation.dnanexus.com/developer/api/running-analyses/io-and-run-specifications">IO and Run Specification</a> guide.</p>
<h2 id="integrating-tools-and-packages">Integrating Tools and Packages</h2>
<p>Once we have finished creating the basic FastQC application using <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code>, the project structure should look like:</p>
<div class="codehilite"><pre><span></span><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="o">/</span>
<span class="err">├──</span> <span class="n">Readme</span><span class="p">.</span><span class="n">developer</span><span class="p">.</span><span class="n">md</span>
<span class="err">├──</span> <span class="n">Readme</span><span class="p">.</span><span class="n">md</span>
<span class="err">├──</span> <span class="n">dxapp</span><span class="p">.</span><span class="n">json</span>
<span class="err">├──</span> <span class="n">resources</span><span class="o">/</span>
<span class="err">├──</span> <span class="n">src</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span>
<span class="err">└──</span> <span class="n">test</span><span class="o">/</span>
</pre></div>


<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Anything in the resources folder is unpacked into the root directory (<code class="codehilite"><span class="o">/</span></code>) of the virtual Linux machine that your application will run on. If we create the directory path <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span></code>, anything in the bin folder would be unpacked into <code class="codehilite"><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span></code> on the Linux machine. This is handy because that path is included in the default <code class="codehilite"><span class="err">$</span><span class="n">PATH</span></code> environment variable.</p>
<p>Your application's executable will use <code class="codehilite"><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dnanexus</span><span class="o">/</span></code> as its current working directory.</p>
</div>
<p>Though <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> does not create this, we can create it ourselves.  Paste the following lines into your terminal.</p>
<div class="codehilite"><pre><span></span>$ mkdir -p dx-fastqc-example-app/resources/usr/bin
</pre></div>


<h2 id="packaging-fastqc">Packaging FastQC</h2>
<p>To incorporate FastQC into this project, we need to download the executable binary and package it within the <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span></code>. Download the FastQC v0.11.8 (Win/Linux zip file) and unzip it. After unzipping, move the FastQC folder into the <code class="codehilite"><span class="n">resources</span></code> folder.</p>
<div class="codehilite"><pre><span></span>$ unzip fastqc_v0.11.8.zip
$ mv FastQC /path/to/project/dx-fastqc-example-app/resources/
</pre></div>


<p>Now, our project will look like this:</p>
<div class="codehilite"><pre><span></span><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="o">/</span>
<span class="err">├──</span> <span class="n">LICENSE</span>
<span class="err">├──</span> <span class="n">README</span><span class="p">.</span><span class="n">md</span>
<span class="err">├──</span> <span class="n">Readme</span><span class="p">.</span><span class="n">developer</span><span class="p">.</span><span class="n">md</span>
<span class="err">├──</span> <span class="n">dxapp</span><span class="p">.</span><span class="n">json</span>
<span class="err">├──</span> <span class="n">test</span><span class="o">/</span>
<span class="err">├──</span> <span class="n">resources</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">FastQC</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">│</span>   <span class="err">├──</span> <span class="n">fastqc</span>
<span class="err">│</span>   <span class="err">│</span>   <span class="err">└──</span> <span class="p">...</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">usr</span><span class="o">/</span>
<span class="err">│</span>       <span class="err">└──</span> <span class="n">bin</span><span class="o">/</span>
<span class="err">└──</span> <span class="n">src</span><span class="o">/</span>
    <span class="err">└──</span> <span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<h2 id="installing-dependencies">Installing Dependencies</h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are importing custom tools, or are using tools that rely on various packages and requirements, they can be specified in the "runSpec".</p>
<p>For more information on installing dependencies and available software packages, refer to the <a href="https://documentation.dnanexus.com/developer/apps/execution-environment">Execution Environment Reference</a>.</p>
</div>
<p>Some external package managers that we can leverage when building an app include:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Package Manager</th>
<th>Application</th>
</tr>
</thead>
<tbody>
<tr>
<td>APT</td>
<td>Advanced Packaging Tool for Ubuntu</td>
</tr>
<tr>
<td>CPAN</td>
<td>Comprehensive Perl Archive Network</td>
</tr>
<tr>
<td>CRAN</td>
<td>Comprehensive R Archive Network</td>
</tr>
<tr>
<td>gem</td>
<td>Package Manager for Ruby</td>
</tr>
<tr>
<td>pip</td>
<td>PyPI (Python Package Index)</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>One requirement for FastQC is that it must have a suitable <a href="https://www.java.com/en/">Java Runtime Environment</a>. To include this in the app, we have to edit the <code class="codehilite"><span class="n">dxapp</span><span class="p">.</span><span class="n">json</span></code> file. Open <code class="codehilite"><span class="n">dxapp</span><span class="p">.</span><span class="n">json</span></code> and append the following line to <code class="codehilite"><span class="ss">&quot;runSpec&quot;</span></code>:</p>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;execDepends&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;openjdk-7-jre-headless&quot;</span><span class="p">,</span>
     <span class="nt">&quot;package_manager&quot;</span><span class="p">:</span> <span class="s2">&quot;apt&quot;</span><span class="p">}</span>
  <span class="p">]</span>
</pre></div>


<p>Be sure to add a comma at the very end of the "file" object line to accommodate the new "execDepends" lines. Now, the <code class="codehilite"><span class="ss">&quot;runSpec&quot;</span></code> object should look like the following:</p>
<div class="codehilite"><pre><span></span>  <span class="err">...</span>
  <span class="s2">&quot;runSpec&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;timeoutPolicy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;*&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;hours&quot;</span><span class="p">:</span> <span class="mi">48</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;interpreter&quot;</span><span class="p">:</span> <span class="s2">&quot;bash&quot;</span><span class="p">,</span>
    <span class="nt">&quot;release&quot;</span><span class="p">:</span> <span class="s2">&quot;14.04&quot;</span><span class="p">,</span>
    <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span>
    <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;src/dx-fastqc-example-app.sh&quot;</span><span class="p">,</span>
    <span class="nt">&quot;execDepends&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;openjdk-7-jre-headless&quot;</span><span class="p">,</span>
       <span class="nt">&quot;package_manager&quot;</span><span class="p">:</span> <span class="s2">&quot;apt&quot;</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span><span class="err">,</span>
  <span class="err">...</span>
</pre></div>


<p>When you build and run your application, the virtual environment will now download <code class="codehilite"><span class="n">openjdk</span><span class="o">-</span><span class="mi">7</span></code> from Ubuntu's APT package manager as a prerequisite. For more information on how to specify packages from Git, R, or Python, refer to the <a href="https://documentation.dnanexus.com/developer/apps/execution-environment#software-packages">Software Packages</a> wiki page.</p>
<h2 id="calling-fastqc">Calling FastQC</h2>
<p>The last step is to call the FastQC executable from within the app. Open up <code class="codehilite"><span class="n">src</span><span class="o">/</span><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span></code> with a text editor. Inside this Bash script is where we will be working with FastQC and our data. Before we dive in, its a good idea to add a few useful parameters for the script execution.</p>
<p>Right after the Bash shebang (<code class="codehilite"><span class="ch">#!/bin/bash</span></code>), add the following line:</p>
<div class="codehilite"><pre><span></span><span class="nb">set</span> -e -x
</pre></div>


<p>Below is a table describing what each flag does:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-e</td>
<td>Exit immediately if a command exits with a non-zero status.</td>
</tr>
<tr>
<td>-x</td>
<td>Print each command to standard error before execution.</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>Our first change has to do with how our BAM file is downloaded. Although <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> automatically generates a line that will download the input file and rename it, we want to keep the original file name because FastQC uses the input file as part of the report name. Remove the <code class="codehilite"><span class="o">-</span><span class="n">o</span> <span class="n">bam_file</span></code> portion so the line looks like the following:</p>
<div class="codehilite"><pre><span></span>dx download <span class="s2">&quot;</span><span class="nv">$bam_file</span><span class="s2">&quot;</span>       <span class="c1"># Downloads our input BAM file without renaming</span>
</pre></div>


<p>After the application downloads the input file, we need to create the appropriate output directories and run FastQC on our BAM file. Add the following lines to the bash script within the <code class="codehilite"><span class="n">main</span></code> function:</p>
<div class="codehilite"><pre><span></span>mkdir ~/fastqc-out/                                    <span class="c1"># FastQC Output Folder</span>
/FastQC/fastqc <span class="s2">&quot;</span><span class="nv">$bam_file_name</span><span class="s2">&quot;</span> -o ~/fastqc-out        <span class="c1"># Runs FastQC on BAM File</span>
</pre></div>


<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be sure to use <code class="codehilite"><span class="ss">&quot;$bam_file_name&quot;</span></code> as our input for FastQC. Using <code class="codehilite"><span class="ss">&quot;$bam_file&quot;</span></code> only returns the DNAnexus file-id associated with the input file.</p>
<p>For more information on helper variables, refer to the <a href="https://documentation.dnanexus.com/developer/apps/advanced-app-tutorial#set-output-name-using-bash-app-helper-variables">Advanced App Tutorial</a>.</p>
</div>
<h2 id="uploading-files">Uploading Files</h2>
<p>After FastQC finishes, the last thing to do is to upload the reports generated by FastQC to our project. These virtual Linux machines are provisioned at-will, meaning that they are only spun up when a job is submitted. When we create an application and run it in the cloud, we submit it as a job to be executed. When a job gets executed, a virtual machine will download all the necessary requirements (tools, packages, data, etc.) and run the job. Any output files on the machine must be uploaded back to the project space after a job finishes executing. Any information and data not uploaded to the project space will be inaccessible and lost.</p>
<p>You will see two lines generated for us by <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code> when we specified the outputs for our application. We need to change these to upload the correct files from our output directory that we specified for FastQC. Otherwise, it assumes they are in the home directory. Before this, we can also (optionally) rename the files to be uploaded. Add the following lines, making sure to replace the two original upload lines.</p>
<p>Lines to remove/overwrite:</p>
<div class="codehilite"><pre><span></span><span class="c1"># Generated by dx-app-wizard</span>
<span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload fastqc_html --brief<span class="k">)</span>
<span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload fastqc_zip --brief<span class="k">)</span>
</pre></div>


<p>Lines to add:</p>
<div class="codehilite"><pre><span></span><span class="c1"># (Optional) Renames the FastQC reports</span>
mv ~/fastqc-out/*.html ~/fastqc-out/fastqc-report.html
mv ~/fastqc-out/*.zip ~/fastqc-out/fastqc-report.zip

<span class="c1"># Uploads the respective HTML and Zip file (lines to change)</span>
<span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.html --brief<span class="k">)</span>
<span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.zip --brief<span class="k">)</span>
</pre></div>


<p>We are using <code class="codehilite"><span class="ss">&quot;$bam_file_prefix&quot;</span></code> to help name the output report file. These helper variables are provided to help make file naming easy. For more information on helper variables, refer to the <a href="https://documentation.dnanexus.com/developer/apps/advanced-app-tutorial#set-output-name-using-bash-app-helper-variables">Advanced App Tutorial</a>.</p>
<p>In this step, we are also moving the HTML and Zip file generated by FastQC to the directories which will be uploaded.</p>
<p>After this step, <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">sh</span></code> should look like:</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nb">set</span> -e -x

main<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&quot;Value of bam_file: &#39;</span><span class="nv">$bam_file</span><span class="s2">&#39;&quot;</span>

    <span class="c1"># Downloads file from project to virtual machine workspace</span>
    dx download <span class="s2">&quot;</span><span class="nv">$bam_file</span><span class="s2">&quot;</span>

    <span class="c1"># Creating output directory for FastQC</span>
    mkdir ~/fastqc-out

    <span class="c1"># Runs FastQC on BAM file</span>
    /FastQC/fastqc <span class="s2">&quot;</span><span class="nv">$bam_file_name</span><span class="s2">&quot;</span> -o ~/fastqc-out

    <span class="c1"># Renames the FastQC reports to include the BAM file prefix</span>
    mv ~/fastqc-out/*.html ~/fastqc-out/fastqc-report.html
    mv ~/fastqc-out/*.zip ~/fastqc-out/fastqc-report.zip

    <span class="c1"># Uploads the respective HTML and Zip file</span>
    <span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.html --brief<span class="k">)</span>
    <span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.zip --brief<span class="k">)</span>

    <span class="c1"># Adds and formats appropriate output variables for your app</span>
    dx-jobutil-add-output fastqc_html <span class="s2">&quot;</span><span class="nv">$fastqc_html</span><span class="s2">&quot;</span> --class<span class="o">=</span>file
    dx-jobutil-add-output fastqc_zip <span class="s2">&quot;</span><span class="nv">$fastqc_zip</span><span class="s2">&quot;</span> --class<span class="o">=</span>file
<span class="o">}</span>
</pre></div>


<h2 id="building-your-app">Building Your App</h2>
<p>Before building, ensure that you are in the parent directory of the <strong>local</strong> project folder generated by <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">wizard</span></code>. To check, if you enter the command <code class="codehilite"><span class="n">ls</span></code>, you should see the project folder <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span><span class="o">/</span></code> appear in the output.</p>
<p>To build your application, enter the following into your terminal:</p>
<div class="codehilite"><pre><span></span>$ dx build dx-fastqc-example-app
</pre></div>


<p>This command will package the tools and files as an application which can then be run on the DNAnexus Platform. In the screenshot below, you can see the compiled app in our project workspace selected and highlighted in blue.</p>
<p>To verify that the build was completed successfully, you can enter <code class="codehilite"><span class="n">dx</span> <span class="n">ls</span></code>. This should show you all the files in your project space in the cloud.</p>
<div class="codehilite"><pre><span></span><span class="c1"># This will show what files are in your root directory for your project space in the cloud</span>
$ dx ls
</pre></div>


<p>You should see something along the lines of this printed out in your terminal. Note that a compiled copy of our <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span></code> now lives in the project.</p>
<div class="codehilite"><pre><span></span><span class="p">.</span>
<span class="err">├──</span> <span class="k">immediate</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="p">...</span>
<span class="err">├──</span> <span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span>
<span class="err">└──</span> <span class="n">SAMPLE_INFO</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>You can also <a href="https://platform.dnanexus.com/projects">view the project</a> directly from your browser. You will see a similar result.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-1.png" /></p>
<p>Any time you make any changes to the scripts or the application, you will need to rebuild the application. To overwrite a previous version of the app, specify the <code class="codehilite"><span class="o">-</span><span class="n">f</span></code> command.</p>
<p>You can also inspect and configure the application by clicking on it.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-2.png" /></p>
<h2 id="running-your-app">Running Your App</h2>
<p>To run the <code class="codehilite"><span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span></code>, enter the following into the terminal:</p>
<div class="codehilite"><pre><span></span>$ dx run dx-fastqc-example-app -i <span class="nv">bam_file</span><span class="o">=</span>/path/to/&lt;bam-file&gt;.bam
</pre></div>


<p>For this example, I am using the PCGP dataset and my run command will look like the following:</p>
<div class="codehilite"><pre><span></span>$ dx run dx-fastqc-example-app -i <span class="nv">bam_file</span><span class="o">=</span>/immediate/bam/SJBALL020073_D1.RNA-Seq.bam
</pre></div>


<p>The input path will vary depending on how the data looks inside your DNAnexus project, but it might look like the following: <code class="codehilite"><span class="o">/</span><span class="n">restricted</span><span class="o">/</span><span class="n">bam</span><span class="o">/&lt;</span><span class="n">bam</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span><span class="p">.</span><span class="n">bam</span></code></p>
<p>You will be prompted to confirm that you wish to run the application with the following JSON input and whether you would like to monitor the job in your terminal.</p>
<div class="codehilite"><pre><span></span>Using input JSON:
<span class="o">{</span>
    <span class="s2">&quot;bam_file&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;</span><span class="nv">$dnanexus_link</span><span class="s2">&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;project&quot;</span>: <span class="s2">&quot;project-FV9XFG0991ZbPVgQ2jx1vZv5&quot;</span>,
            <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;file-FV9gzf8991ZXQ1kv7V3BqgjV&quot;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

Confirm running the executable with this input <span class="o">[</span>Y/n<span class="o">]</span>: Y
Calling applet-FVbY8Qj991ZQ1863BGK6x0bk with output destination project-FV9XFG0991ZbPVgQ2jx1vZv5:/

Job ID: job-FVbY8Z0991ZXx5v1Fk3QgJPV
Watch launched job now? <span class="o">[</span>Y/n<span class="o">]</span> Y

Job Log
-------
Watching job job-FVbY8Z0991ZXx5v1Fk3QgJPV. Press Ctrl+C to stop.
</pre></div>


<p>You can also monitor active jobs by going to the project space and selecting the "Monitor" tab.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-3.png" /></p>
<h2 id="job-completion">Job Completion</h2>
<p>Once the job finishes, you will receive an email from DNAnexus (<a href="mailto:notification@dnanexus.com">notification@dnanexus.com</a>) about whether the job has completed successfully or failed.</p>
<p>Make sure to check that these emails don't get sent to your spam folder.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-4.png" /></p>
<p>Clicking the links in the email should open up a new tab in your browser and take you to the appropriate project. Here, we can see that FastQC has run successfully and that the two files generated by FastQC have been uploaded back into our project space.</p>
<p><img alt="" src="../../../images/guides/data/creating-a-cloud-app-5.png" /></p>
<p>Again, if we run the <code class="codehilite"><span class="n">dx</span> <span class="n">ls</span></code> command, we can verify that two new files titled "fastqc-report.html" and "fastqc-report.zip" are in the root directory of our project.</p>
<div class="codehilite"><pre><span></span><span class="p">.</span>
<span class="err">├──</span> <span class="k">immediate</span><span class="o">/</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="p">...</span>
<span class="err">├──</span> <span class="n">dx</span><span class="o">-</span><span class="n">fastqc</span><span class="o">-</span><span class="n">example</span><span class="o">-</span><span class="n">app</span>
<span class="err">├──</span> <span class="n">fastqc</span><span class="o">-</span><span class="n">report</span><span class="p">.</span><span class="n">html</span>
<span class="err">├──</span> <span class="n">fastqc</span><span class="o">-</span><span class="n">report</span><span class="p">.</span><span class="n">zip</span>
<span class="err">└──</span> <span class="n">SAMPLE_INFO</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<h2 id="conclusion">Conclusion</h2>
<p>If you have made it this far, you have likely wrapped your first genomic analysis tool for use in the cloud. For your reference, we have included the final FastQC application at the <a href="https://github.com/stjude/sjcloud-app-tutorial">St. Jude App Tutorial Repository</a>.</p>
<p>If you have any questions or suggestions on how we can improve this tutorial, please <a href="https://github.com/stjude/sjcloud-docs/issues">file an issue</a>, contact us at <a href="https://stjude.cloud/contact">https://stjude.cloud/contact</a>, or email us at <a href="mailto:support@stjude.cloud">support@stjude.cloud</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../working-with-our-data/" title="Working with Our Data" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Working with Our Data
              </span>
            </div>
          </a>
        
        
          <a href="../data-transfer-app/" title="Data Transfer Application" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Data Transfer Application
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 - 2019 St. Jude Children's Research Hospital
          </div>
        
        
        built from <a href="https://github.com/stjude/sjcloud-docs/tree/1b129ec">1b129ec</a> using
        
        <a href="https://www.mkdocs.org">MkDocs</a>
        and a modified version of
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>.
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://www.facebook.com/stjuderesearch/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/stjuderesearch?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/st-jude-childrens-research-hospital" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://github.com/stjude" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.ec5be3af.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>